!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.afinity=e()}}(function(){var e;return function t(e,n,i){function r(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[s]={exports:{}};e[s][0].call(l.exports,function(t){var n=e[s][1][t];return r(n?n:t)},l,l.exports,t,e,n,i)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<i.length;s++)r(i[s]);return r}({1:[function(e,t,n){function i(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function o(e){return"number"==typeof e}function s(e){return"object"==typeof e&&null!==e}function u(e){return void 0===e}t.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0,i.defaultMaxListeners=10,i.prototype.setMaxListeners=function(e){if(!o(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},i.prototype.emit=function(e){var t,n,i,o,a,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],u(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=new Array(i-1),a=1;i>a;a++)o[a-1]=arguments[a];n.apply(this,o)}else if(s(n)){for(i=arguments.length,o=new Array(i-1),a=1;i>a;a++)o[a-1]=arguments[a];for(f=n.slice(),i=f.length,a=0;i>a;a++)f[a].apply(this,o)}return!0},i.prototype.addListener=function(e,t){var n;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?s(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,s(this._events[e])&&!this._events[e].warned){var n;n=u(this._maxListeners)?i.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},i.prototype.on=i.prototype.addListener,i.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},i.prototype.removeListener=function(e,t){var n,i,o,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],o=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(s(n)){for(u=o;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},i.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},i.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},i.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},{}],2:[function(e,t,n){(function(n){var i,r;e("../base/shim"),i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=0,t.exports=function(e){var t;return t=Object.create(e),t.model=Object.create(e.model),t.view=Object.create(e.view),t.controller=Object.create(e.controller),t._container=Object.create(e._container),t._events=Object.create(e._events),t.form=Object.create(e.form),t._id=r++,t._parent=null,t._events.data={},t._container.children={},t.view.$root=e.view.$root instanceof jQuery&&e._template?i(e.view.$root.outerHTML()):i(),t._data={},e._data&&i.extend(!0,t._data,e._data),t.model._data={},e.model._data&&i.extend(!0,t.model._data,e.model._data),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../base/shim":6}],3:[function(e,t,n){(function(n){var i,r;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../util"),t.exports=function(e){var t,n,o,s;e.model._initData=i.extend({},e.model._data),r.proxyAll(e,e),e.view.render(),t=function(t,n){"function"==typeof n&&e.bind(t,n)};for(n in e.controller)o=n.split(","),s=e.controller[n],i.each(o,function(e,n){n=i.trim(n),t(n,s)});return e.trigger("create"),e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":25}],4:[function(e,t,n){(function(n){var i,r,o,s;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,s=e("../util"),e("../util/jquery.util"),t.exports=function(e,t){var n,u,a,f;t=o(t),u=t[0];for(a in u)switch(a){case"model":i.extend(e.model._data,u.model);break;case"view":if("object"==typeof u.view){i.extend(e.view,u.view);continue}if("#"!==u.view[0]){e.view.format=u.view;continue}if(n=i(u.view),f=n.prop("tagName"),"undefined"==typeof f)throw new Error("afinity: view template not found at "+u.view);f=f.toLowerCase(),"script"===f?e.view.format=n.html():("form"===f&&r(n,e),e.view.format=n.outerHTML(),e.view.$root=n,e._template=!0);break;case"events":case"controller":i.extend(e.controller,u[a]),s.extendController(e);break;default:e[a]=u[a]}return e},o=function(e){var t;return"string"==typeof e[0]&&(t={},t.view=e[0],e.length>1&&"object"==typeof e[1]&&(t.events=e[1]),e=[t]),e},r=function(e,t){var n,r;return r={},n={},e.find("input, select, textarea").each(function(){var e,t,o,s,u,a;e=i(this),t=e.attr("data-bind"),o=e.attr("name"),u=e.prop("tagName").toLowerCase(),a=e.attr("type")||"",s=e.attr("required"),"textarea"===u&&(a="textarea"),i.isEmpty(t)&&!i.isEmpty(o)&&("checkbox"===a?r[o]="checked"===e.attr("checked"):"radio"===a?e.attr("checked")&&(r[o]=e.val()):r[o]=e.val(),e.attr("data-bind",o)),"undefined"!=typeof s&&(n[o]="email"===a||"email"===o?"email":!0)}),i.isEmpty(r)||i.extend(t.model._data,r),i.isEmpty(n)||(t.required=i.extend(t.required||{},n)),t}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":25,"../util/jquery.util":26}],5:[function(e,t,n){(function(n){var i,r,o,s,u,a;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,a=e("../util"),s=e("../extend/eventify"),u=e("../extend/html"),r=e("../extend/css"),o=e("../extend/escaped"),t.exports=function(e){var t;return e.isAfinity=function(e){return"object"!=typeof e?!1:a.isAfinity(e)},e.body=e({_body:!0,view:{$:function(e){return e?i(e,"body"):i("body")}},controller:{_create:function(){}}}),t={},e.create=function(n,i){var r;return"string"!=typeof n||"<"!==(r=n[0])&&"#"!==r?"object"==typeof n?null!=n.name?e.create(n.name,n):e(n,i):"object"==typeof i?(t[n]=a.isAfinity(i)?i:e(i),t[n]):void 0:e(n,i)},e.clone=function(n,i){if(a.isAfinity(n))return e(n,i);if(null!=t[n])return e(t[n],i);throw new Error("afinity.clone: module "+n+" not found")},e.use=function(e){if(null!=t[e])return t[e];throw new Error("afinity.use: module "+e+" not found")},e.eventify=s,e.eventify(e),e.html=u,e.css=r,e.escaped=o,e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../extend/css":7,"../extend/escaped":8,"../extend/eventify":9,"../extend/html":10,"../util":25}],6:[function(e,t,n){(function(e){var t;t="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,(!Object.create||Object.create.toString().search(/native code/i)<0)&&(Object.create=function(e){var n;return n=function(){},t.extend(n.prototype,e),new n}),(!Object.getPrototypeOf||Object.getPrototypeOf.toString().search(/native code/i)<0)&&(Object.getPrototypeOf="object"==typeof"test".__proto__?function(e){return e.__proto__}:function(e){return e.constructor.prototype})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],7:[function(e,t,n){var i,r;r=function(e,t){var n,i;for(n in t)i=t[n],e[n]=i;return e},i=function(e){var t,n,o,s,u,a,f,l,d,c,h;t="";for(c in e){if(d=e[c],n="",l={},f=d.mixin,d)for(delete d.mixin,f instanceof Array||(f=[f]),o=0,u=f.length;u>o;o++)a=f[o],r(d,a);for(s in d)h=d[s],"object"==typeof h?l[c+" "+s]=h:(s=s.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()}),n+="  "+s+": "+h+";\n");n&&(t+=c+" {\n",t+=n,t+="}\n"),t+=i(l)}return t},t.exports=i},{}],8:[function(e,t,n){t.exports=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;").replace(/\ /g,"&nbsp;")}},{}],9:[function(e,t,n){var i,r,o;i=e("events").EventEmitter,t.exports=function(e){var t,n,i;e=e||{},t=new r;for(n in t)i=t[n],e[n]=i;return e},r=function(){function e(){this.hub=new i}return e.prototype.on=function(e,t){var n,i,r;r=o(e,t);for(n in r)i=r[n],this.hub.on(n,i);return this},e.prototype.once=function(e,t){var n,i,r;r=o(e,t);for(n in r)i=r[n],this.hub.once(n,i);return this},e.prototype.emit=function(e,t){var n,i,r;r=o(e,t);for(i in r)n=r[i],this.hub.emit(i,n);return this},e.prototype.trigger=function(e,t){return this.emit(e,t)},e}(),o=function(e,t){var n;return n={},"string"==typeof e?n[e]=t:n=e,n}},{events:1}],10:[function(t,n,i){var r,o,s,u,a,f,l,d,c,h,p,y,v,m,w,g,b,_=[].slice;c=function(e){return!!e&&"object"==typeof e&&e.constructor===Object},p=function(e){return"string"==typeof e},h=function(e){var t;return"boolean"==(t=typeof e)||"number"===t||"string"===t||"symbol"===t},d=function(e){return"function"==typeof e},v=function(e){return function(){var t;return t=1<=arguments.length?_.call(arguments,0):[],!e.apply(null,t)}},y=function(){var e,t,n,i,r,o,s;for(r=1<=arguments.length?_.call(arguments,0):[],o={},e=0,n=r.length;n>e;e++){i=r[e];for(t in i)s=i[t],o[t]=s}return o},u={},"allowfullscreen,async,autofocus,autoplay,checked,controls,default,defer,disabled,formnovalidate,hidden,ismap,itemscope,loop,multiple,muted,novalidate,open,readonly,required,reversed,scoped,seamless,selected,sortable,typemustmatch,html".split(",").forEach(function(e){return u[e]=!0}),f=function(e){return null==e&&(e=""),e.replace(/&/g,"&amp;").replace(/</g,"&lt;")},l=function(e){return f(e).replace(/"/g,"&quot;")},o=function(e,t){return"bind"===e&&(e="data-bind"),u[e]?t?""+l(e):"":l(e)+'="'+l(t)+'"'},s=function(e){var t,n;return function(){var i;i=[];for(t in e)n=e[t],i.push(o(t,n));return i}().join(" ")},b=function(e,t){return d(t)?b(e,t.call(e)):h(t)?m.text(String(t)):void 0},m=null,w=function(e,t,n){var i;return null==n&&(n=!1),i=function(){var o,s,u,f,l,h;if(o=1<=arguments.length?_.call(arguments,0):[],!m)return a(new r,i,o);for(h=o.filter(c).reduce(function(e,t){return y(e,t)},{}),u=o.filter(v(c)).map(function(e){return d(e)?e:function(){return e}}),n||m.begin(e,t,h),f=0,l=u.length;l>f;f++)s=u[f],b(this,s);return void(t||m.close(e))}},r=function(){function e(){this.buf=[]}return e.prototype.start=function(){},e.prototype.begin=function(e,t,n){var i;return this.buf.push("<"+e+((i=s(n)).length?" "+i:"")+">")},e.prototype.text=function(e){return this.buf.push(f(e))},e.prototype.close=function(e){return this.buf.push("</"+e+">")},e.prototype.end=function(){return this.buf.join("")},e}(),a=function(e,t,n){try{m=e,m.start(),t.apply(this,null!=n?n:[])}finally{m=null}return e.end()},g={tag:w,capture:a},"html,head,style,title,address,article,body,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,blockquote,dd,div,dl,dt,figcaption,figure,li,main,ol,p,pre,ul,a,abbr,b,bdi,bdo,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,audio,map,video,iframe,object,canvas,noscript,script,del,ins,caption,colgroup,table,tbody,td,tfoot,th,thead,tr,button,datalist,fieldset,form,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,decorator,element,shadow,template".split(",").forEach(function(e){return g[e]=w(e)}),"area,base,br,col,embed,hr,img,input,keygen,link,meta,param,source,track,wbr".split(",").forEach(function(e){return g[e]=w(e,!0)}),g.pass=w("pass",!0,!0),g.html5=function(){var e;return e=1<=arguments.length?_.call(arguments,0):[],w("!DOCTYPE",!0)({html:!0},"\n",function(){return g.html.apply(g,e)})},"object"==typeof n?n.exports=g:"function"==typeof e&&e.amd?e(function(){return g}):this.tagg=g},{}],11:[function(t,n,i){var r=[].slice;!function(o){var s,u,a,f;s={create:t("./base/create"),load:t("./base/load"),launch:t("./base/launch"),addMethods:t("./base/methods")},a=t("./prototype"),f=t("./util"),u=function(){var e,t,n;return e=1<=arguments.length?r.call(arguments,0):[],n=a,f.isAfinity(e[0])&&(n=e[0],e.shift()),t=s.create(n),e.length>0&&s.load(t,e),s.launch(t)},s.addMethods(u),u.fn=a,"function"==typeof e&&e.amd?e([],function(){return u}):"object"==typeof i?n.exports=u:o.afinity=u}(window)},{"./base/create":2,"./base/launch":3,"./base/load":4,"./base/methods":5,"./prototype":23,"./util":25}],12:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,t.exports={_create:function(){this.view.stylize(),this.view.bindings(),this.view.sync(),null!=this.init&&this.init()},_destroy:function(){this.view.style&&n("head #afinity_"+this._id,window.document).remove(),this._container.empty(),this.view.$().remove()},_append:function(e,t){this.view.$(t).append(e.view.$())},_prepend:function(e,t){this.view.$(t).prepend(e.view.$())},_before:function(e,t){this.view.$(t).before(e.view.$())},_after:function(e,t){this.view.$(t).after(e.view.$())},_remove:function(e){},_change:function(){}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],13:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,t.exports=function(e){var t,i,r;if(!e)return this.model._data;if("string"==typeof e){if(i=e.split("."),r=this.model._data[i[0]],n.isPlainObject(r))for(t=1;t<i.length;)r=n.isPlainObject(r)&&r[i[t]]?r[i[t]]:r[i.splice(t).join(".")],t++;else r=this.model._data[e];return r}throw new Error("afinity: unknown argument for get")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,t.exports=function(e,t,i){var r,o,s,u,a,f,l,d,c,h,p,y,v,m,w,g;if(y=[],w={},"string"==typeof e&&(o=e,e={},e[o]="object"==typeof t?n.extend({},t):t,t=i||{}),typeof e===!1)throw new Error("afinity.js: unknown argument type in model.set()");if(t&&t.reset)r=n.extend({},this.model._data),this.model._data=n.extend({},e);else{r=n.extend({},this.model._data);for(g in e){if(g.indexOf(".")<0)break;for(m=g.split("."),s=this.model._data[m[0]]||{},u=1;u<m.length-1;)v=s[m[u]],n.isPlainObject(v)?s=v:(s[m[u]]={},s=s[m[u]]),u++;h=m[m.length-1],n.isPlainObject(e[c])&&n.isPlainObject(s[h])?n.extend(s[h],e[g]):s[h]=e[g]}n.extend(this.model._data,e)}for(c in e)this.model._data[c]!==r[c]&&(y.push(c),w[c]=r[c]),delete r[c];for(c in r)this.model._data[c]!==r[c]&&(y.push(c),w[c]=r[c]);if(t&&t.silent)return this;for(this.trigger("change",[y,w]),t&&t.direct?l=!1:f=!0,a=d=0,p=y.length;p>d;a=++d)c=y[a],this.trigger("change:"+c,w[c],l);return this}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],15:[function(e,t,n){(function(n){var i,r;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../util/jquery.util"),t.exports={invalid:function(){var e,t;e=[];for(t in this.required)this.model.isValidKey(t)||e.push(t);return e},isValid:function(e){return"undefined"==typeof e?0===this.model.invalid().length:this.model.isValidKey(e)},isValidKey:function(e){var t,n;return"undefined"==typeof this.required[e]?!0:(n=this.model.get(e),t=this.required[e],t===!0?!i.isEmpty(n):"email"===t?i.isEmail(n):!0)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/jquery.util":26}],16:[function(e,t,n){(function(n){var i,r,o,s;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,s=e("../util"),o=e("./model-validate"),r={get:e("./model-get"),set:e("./model-set"),reset:function(e){return e||(e=this.model._initData),this.model.set(e,{reset:!0}),this},size:function(){return s.size(this.model._data)},each:function(e){return i.each(this.model._data,i.proxy(e,this)),this}},t.exports=i.extend(r,o)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":25,"./model-get":13,"./model-set":14,"./model-validate":15}],17:[function(e,t,n){(function(e){var n,i;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,i=function(e){var t,n,i,r,o,s;if(r={key:null,attr:[]},o=e.split(","),s=/([a-zA-Z0-9_\-\.]+)(?:[\s=]+([a-zA-Z0-9_\-]+))?/,n=!1,i=void 0,o.length>0)for(t=0;t<o.length;){if(i=o[t].match(s))if("undefined"==typeof i[2]||""===i[2]){if(n)throw new Error("You may specify only one key ("+n+" has already been specified in data-bind="+e+")");n=i[1],r.key=i[1]}else r.attr.push({attr:i[1],attrVar:i[2]});t++}return r},t.exports=function(){var e,t,r,o;return o=this,t=this.view.$().filter("[data-bind]"),e=this.view.$("[data-bind]"),r=function(e,t,n){var i;return i=e.attr[n],function(){"html"===i.attr?t.html(o.model.get(i.attrVar)):t.attr(i.attr,o.model.get(i.attrVar))}},t.add(e).each(function(){var e,t,s,u;e=n(this),s=i(e.data("bind")||""),u=e.data("required"),t=function(){var t;if(s.attr)for(t=0;t<s.attr.length;)o.bind("_change:"+s.attr[t].attrVar,r(s,e,t)),t++},s.key&&(e.is("input:checkbox")?(o.bind("_change:"+s.key,function(){return e.prop("checked",o.model.get(s.key))}),e.change(function(){return o.model.set(s.key,e.prop("checked"),{direct:!0})})):e.is("select")?(o.bind("_change:"+s.key,function(){return e.val(o.model.get(s.key))}),e.change(function(){return o.model.set(s.key,e.val(),{direct:!0})})):e.is("input:radio")?(o.bind("_change:"+s.key,function(){return o.view.$root.find('input[name="'+e.attr("name")+'"]').filter('[value="'+o.model.get(s.key)+'"]').prop("checked",!0)}),e.change(function(){return e.prop("checked")?o.model.set(s.key,e.val(),{direct:!0}):void 0})):e.is('input:text, textarea, input[type="search"]')?(o.bind("_change:"+s.key,function(){return e.val(o.model.get(s.key))}),e.keyup(function(){setTimeout(function(){return o.model.set(s.key,e.val(),{direct:!0})},50)})):o.bind("_change:"+s.key,function(t){return function(){var t;t=o.model.get(s.key),e.text(t||0===t?o.model.get(s.key).toString():"")}}(this))),t(),s.attr.forEach(function(t,n){"keyup"===t.attr?(e.keyup(function(){setTimeout(function(){o.model.set(t.attrVar,e.val())},50)}),o.bind("_change:"+t.attrVar,function(){e.val(o.model.get(t.attrVar))})):"visible"===t.attr&&o.bind("_change:"+t.attrVar,function(){o.model.get(t.attrVar)?e.show():e.hide()})}),o.$node[s.key]=e,o.key[e]=s.key,u&&(o.required[s.key]=u)}),this}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],18:[function(e,t,n){(function(n){var i,r,o;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,o=e("./view-bind"),r="&",t.exports={format:"<div/>",style:"",$:function(e){return e&&e!==r?this.view.$root.find(e):this.view.$root},render:function(){if(0===this.view.format.length)throw new Error("afinity: empty format in view.render()");if(this.view.$root instanceof jQuery&&this._template||(0===this.view.$root.size()?this.view.$root=i(this.view.format):this.view.$root.html(i(this.view.format).html())),!(this.view.$root instanceof jQuery)&&0===this.view.$root.size())throw new Error("afinity: could not generate html from format");return this.$view=this.view.$root,this.$=this.view.$,this},bindings:o,sync:function(){return this.model.each(function(e){return function(t,n){return e.trigger("_change:"+t)}}(this)),this.model.size()>0&&this.trigger("_change"),this},stylize:function(){var e,t,n,o,s;if(0!==this.view.style.length&&0!==this.view.$().size())return o=new RegExp(r,"g"),this.view.hasOwnProperty("style")?(n="afinity_"+this._id,s=this.view.style.replace(o,"."+n),i("head",window.document).append('<style id="'+n+'" type="text/css">'+s+"</style>"),this.view.$().addClass(n)):(t=function(e){for(;null!==e;)if(e=Object.getPrototypeOf(e),e.view.hasOwnProperty("style"))return e._id;return void 0},e=t(this),n="afinity_"+e,this.view.$().addClass(n)),this},$bound:function(e){return null!=this.$node[e]?this.$node[e]:!1}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./view-bind":17}],19:[function(e,t,n){(function(n){var i,r,o=[].slice;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r=e("../util"),t.exports={_insertObject:function(e,t,n,i){var o,s,u,a;if("string"==typeof e?(a=e,e=t,t=a):"object"==typeof e&&"object"==typeof t&&(null==i&&(i=[]),i.unshift(t),t=""),!r.isAfinity(e))throw new Error("afinity.js: append argument is not an afinity object");if(this._container.children[e._id]=e,this.trigger(n,[e,t]),e._parent=this,e.bind("destroy",function(e){return function(t){e._container.remove(t)}}(this)),e.trigger("parent:"+n),null!=i)for(s=0,u=i.length;u>s;s++)o=i[s],this[n](o,t);return this},append:function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],this._container._insertObject.call(this,t,n,"append",e)},prepend:function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],this._container._insertObject.call(this,t,n,"prepend")},after:function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],this._container._insertObject.call(this,t,n,"after")},before:function(){var e,t,n;return t=arguments[0],n=arguments[1],e=3<=arguments.length?o.call(arguments,2):[],this._container._insertObject.call(this,t,n,"before")},remove:function(e){return delete this._container.children[e],this.trigger("remove",e),this},each:function(e){return i.each(this._container.children,e),this},empty:function(){return this.each(function(){return this.destroy()}),this},size:function(){return r.size(this._container.children)}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util":25}],20:[function(e,t,n){(function(e){var n,i,r,o,s=[].slice;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,i="&",r=function(e){var t,n;return t={type:e},n=e.search(/\s/),n>-1?(t.type=e.substr(0,n),t.selector=e.substr(n+1)):("click"===e||"submit"===e||"keyup"===e||"keydown"===e)&&(t.type=e,t.selector=i),t},o=function(e,t){var i,r,o;if(r=n(e).data("events"),void 0!==r&&void 0!==r[t]){o=[];for(i in r[t])r[t].hasOwnProperty(i)&&o.unshift(r[t][i]);r[t]=o}},t.exports={bind:function(e,t){var o,u;return o=r(e),u=function(e){return t(e),!1},o.selector?"click"===o.type||"submit"===o.type?o.selector===i?this.view.$().on(o.type,u):this.view.$().on(o.type,o.selector,u):o.selector===i?this.view.$().on(o.type,t):this.view.$().on(o.type,o.selector,t):n(this._events.data).on(o.type,function(){var e,n;return n=arguments[0],e=2<=arguments.length?s.call(arguments,1):[],t.apply(null,e)}),this},trigger:function(e,t,s){var u,a;return null==s&&(s=!0),u=r(e),u.selector?u.selector===i?this.view.$().trigger(u.type,t):this.view.$().find(u.selector).trigger(u.type,t):(s&&n(this._events.data).trigger("_"+u.type,t),o(this._events.data,"pre:"+u.type),n(this._events.data).trigger("pre:"+u.type,t),o(this._events.data,"pre:"+u.type),n(this._events.data).trigger(u.type,t),this.parent()&&(a=u.type.match(/^child:/)?"":"child:",this.parent().trigger(a+u.type,t)),n(this._events.data).trigger("post:"+u.type,t)),this}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t,n){(function(e){var n;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,t.exports={get:function(e){return this.model.get(e)},set:function(e,t,n){return this.model.set(e,t,n)},silentSet:function(e){return this.model.set(e,{silent:!0})},reset:function(e){return this.model.reset(e)},invalid:function(){return this.model.invalid()},child:function(e){var t,n;t=0,e=e||0;for(n in this._container.children)if(this._container.children.hasOwnProperty(n)){if(t===e)return this._container.children[n];if(t>e)return!1;t++}return!1},children:function(){return this._container.children},replace:function(e,t){var n;return"string"==typeof e&&"object"==typeof t&&(n=e,e=t,t=n),"string"==typeof t&&this.view.$(t).html(""),this.empty()._container.append.apply(this,arguments),this},load:function(e,t,i){var r,o,s,u;if("string"==typeof e&&"object"==typeof i&&(u=n.extend({},t),t=i,i=e,e=u),s=t.length,o=this.size(),n.isArray(t)||(t=[t]),n.each(t,function(t){return function(n,r){t.child(n)?t.child(n).model.set(r):t.append(afinity(e,r),i)}}(this)),o>s)for(r=s;o>r;)this.child(s).destroy(),r++;return this}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],22:[function(e,t,n){(function(n){var i;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,e("../util/jquery.util"),t.exports={form:{clear:function(){var e;return e=[],this.$view.find(":input, textarea").not(":button, :submit, :reset, :hidden").removeAttr("checked").removeAttr("selected").not(":checkbox, :radio, select").val(""),this.$view.find(":radio").each(function(t){return function(n,r){var o,s,u;o=i(r),s=o.attr("name"),u=o.val(),e.indexOf(s)<0&&(e.push(s),o.attr("checked","checked"),t.set(s,u))}}(this)),this.$view},invalid:function(){return this.model.invalid()},toObject:function(){return this.$view.serializeObject()},toJSON:function(){var e;return e=this.$view.serializeObject(),JSON.stringify(e)}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../util/jquery.util":26}],23:[function(e,t,n){(function(n){var i,r,o,s,u;i="undefined"!=typeof window?window.jQuery:"undefined"!=typeof n?n.jQuery:null,r={_afinity:!0,_container:e("./container"),_events:e("./events"),$node:{},key:{},required:{},model:e("../mvc/model"),view:e("../mvc/view"),controller:e("../mvc/controller")},u=e("./shortcuts"),o=e("./extend"),s=e("./form"),t.exports=i.extend(r,u,o,s)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../mvc/controller":12,"../mvc/model":16,"../mvc/view":18,"./container":19,"./events":20,"./extend":21,"./form":22,"./shortcuts":24}],24:[function(e,t,n){t.exports={destroy:function(){this.trigger("destroy",this._id)},parent:function(){return this._parent},append:function(){return this._container.append.apply(this,arguments),this},prepend:function(){return this._container.prepend.apply(this,arguments),this},after:function(){return this._container.after.apply(this,arguments),this},before:function(){return this._container.before.apply(this,arguments),this},remove:function(){return this._container.remove.apply(this,arguments),this},size:function(){return this._container.size.apply(this,arguments)},each:function(){return this._container.each.apply(this,arguments)},empty:function(){return this._container.empty.apply(this,arguments)},bind:function(){return this._events.bind.apply(this,arguments),this},on:function(){return this._events.bind.apply(this,arguments),this},trigger:function(){return this._events.trigger.apply(this,arguments),this}}},{}],25:[function(e,t,n){(function(e){var n,i;n="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,i={},i.isAfinity=function(e){return null==e||"object"!=typeof e?!1:e._afinity===!0},i.size=function(e){var t,n;n=0;for(t in e)n++;return n},i.proxyAll=function(e,t){var r,o,s,u;if(!e||!t)throw new Error("afinity.js: util.proxyAll needs two arguments");for(r in e)if(s=e[r],"function"==typeof e[r])s=e[r]._noProxy?e[r]:n.proxy(e[r]._preProxy||e[r],t),s._preProxy=e[r]._noProxy?void 0:e[r]._preProxy||e[r],e[r]=s;else if("object"==typeof e[r]){if(e[r]instanceof jQuery||i.isAfinity(e[r]))continue;for(o in e[r])u=e[r][o],"function"==typeof e[r][o]&&(u=e[r][o]._noProxy?e[r][o]:n.proxy(e[r][o]._preProxy||e[r][o],t),u._preProxy=e[r][o]._noProxy?void 0:e[r][o]._preProxy||e[r][o],s[o]=u);e[r]=s}},i.extendController=function(e){var t,n;n=function(){var n,i,r,o,s,u;if("function"==typeof e.controller[t]){if(o=t.match(/^(\~)*(.+)/),r=o[1],i=o[2],!r)return;u=e.controller[i]?e.controller[i]._preProxy||e.controller[i]:void 0,n=e.controller[t],s=function(){u&&u.apply(this,arguments),n&&n.apply(this,arguments)},e.controller[i]=s,delete e.controller[t]}};for(t in e.controller)n()},t.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],26:[function(e,t,n){(function(e){var t;t="undefined"!=typeof window?window.jQuery:"undefined"!=typeof e?e.jQuery:null,t.fn.outerHTML=function(e){var t;return e?this.before(e).remove():(t=this[0]?this[0].ownerDocument:document,jQuery("<div>",t).append(this.eq(0).clone()).html())},t.isEmpty=function(e){var t,n,i,r,o;for(o=void 0,i=void 0,n=void 0,r=void 0,t=[o,null,""],n=0,r=t.length;r>n;){if(e===t[n])return!0;n++}if("object"==typeof e){for(i in e)if(e.hasOwnProperty(i))return!1;return!0}return!1},t.isEmail=function(e){var n;return t.isEmpty(e)?!1:(n=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,n.test(e))},t.fn.serializeObject=function(){var e,n;return n={},e={datepicker:"undefined"!=typeof t.pikaday,timepicker:"undefined"!=typeof t.timepicker},this.find("input, select, textarea").each(function(){var i,r,o,s;i=t(this),o=i.attr("type"),r=i.attr("name"),s=i.val(),null!=r&&("checkbox"===o?(i.prop("checked")||(s=""),"undefined"==typeof n[r]?n[r]=s:("string"==typeof n[r]&&(n[r]=[n[r]]),n[r].push(s))):(e.datepicker&&i.hasClass("datepicker")?s=i.pikaday("getDate"):e.timepicker&&i.hasClass("timepicker")&&(s=i.next().val()),n[r]=s))}),n}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[11])(11)});